//SPDX-License-Identifier: MIT
pragma solidity >=0.8.0 <0.9.0;

import "@openzeppelin/contracts/utils/Strings.sol";
import 'base64-sol/base64.sol';
import './ToColor.sol';

library EmotilonRenderMouth {

  function names() public pure returns (string[20] memory) {
    return [
      'circle',
      'sad',
      'confused',
      'creepy',
      'kiss',
      'tongue',
      'openSad',
      'openTeeth',
      'openTooth',
      'tongueSide',
      'openTeethRed',
      'sideRight',
      'flat',
      'flatShort',
      'secret',
      'sick',
      'smileRight',
      'vampire',
      'smile',
      'yawning'
    ];
  }

  function colors() public pure returns (string[5] memory) {
    return [
      'f0c419',
      'fc0f03',
      'fc5203',
      'fa6ba0',
      'ff6699'
    ];
  }

  function render(uint8 gen, uint8 genColor, uint256 healthStatus) public pure returns (string memory) {

    string memory color = colors()[genColor % 5];

    if (healthStatus == 0) {
      // death mouth
      return string.concat('<path style="fill:#', color, ';" d="M30,32H12c-0.553,0-1-0.447-1-1s0.447-1,1-1h18c0.553,0,1,0.447,1,1S30.553,32,30,32z"/>');
    }

    string[20] memory mouths = [
      '<circle style="fill:#C03A2B;" cx="21" cy="31" r="5"/>',
      string.concat('<path style="fill:#', color, ';" d="M32,35c-0.553,0-1-0.448-1-1c0-5.514-4.486-10-10-10s-10,4.486-10,10c0,0.552-0.447,1-1,1s-1-0.448-1-1c0-6.617,5.383-12,12-12s12,5.383,12,12C33,34.552,32.553,35,32,35z"/>'),
      string.concat('<path style="fill:#', color, ';" d="M16.382,32.888c-2.421,0-4.984-1.077-7.089-3.181c-0.391-0.391-0.391-1.023,0-1.414s1.023-0.391,1.414,0c1.43,1.43,3.177,2.339,4.919,2.56c1.261,0.163,3.089,0.019,4.667-1.56c3.51-3.511,9.904-3.511,13.414,0c0.391,0.391,0.391,1.023,0,1.414s-1.023,0.391-1.414,0c-2.721-2.721-7.865-2.721-10.586,0C20.244,32.17,18.36,32.888,16.382,32.888z"/>'),
      string.concat(
        '<path style="fill:#FFFFFF;" d="M31.5,29H29H9v5h20h2.5c1.381,0,2.5-1.119,2.5-2.5C34,30.119,32.881,29,31.5,29z"/>',
        '<g>',
          '<line style="fill:#ECF0F1;" x1="29" y1="34" x2="29" y2="29"/>',
          '<rect x="28" y="29" style="fill:#ECF0F1;" width="2" height="5"/>',
        '</g>',
        '<g>',
          '<line style="fill:#ECF0F1;" x1="14" y1="29" x2="14" y2="34"/>',
          '<rect x="13" y="29" style="fill:#ECF0F1;" width="2" height="5"/>',
        '</g>',
        '<g>',
          '<line style="fill:#ECF0F1;" x1="24" y1="29" x2="24" y2="34"/>',
          '<rect x="23" y="29" style="fill:#ECF0F1;" width="2" height="5"/>',
        '</g>',
        '<g>',
          '<line style="fill:#ECF0F1;" x1="19" y1="29" x2="19" y2="34"/>',
          '<rect x="18" y="29" style="fill:#ECF0F1;" width="2" height="5"/>',
        '</g>'
      ),
      '<path style="fill:#C03A2B;" d="M19.937,33.51c-2.424-5.28,3.662-5.547,6.028-5.1c1.023,0.193,0.857,0.484,1.409,1.686c0.552,1.202,0.88,1.267,0.36,2.168C26.53,34.35,22.361,38.79,19.937,33.51z"/>',
      string.concat(
        '<g>',
          '<path style="fill:#FB7B76;" d="M21,26v7.801c0,2.2,1.8,4,4,4h1c2.2,0,4-1.8,4-4L30,26C28.292,26.021,22.812,26,21,26z"/>',
        '</g>',
        '<path style="fill:#E64C3C;" d="M25.533,32.611c-0.553,0-1-0.447-1-1v-0.165c0.001-2.562-0.071-4.145-0.215-4.715C24.123,26.55,24,26.289,24,26c0-0.553,0.447-1,1-1c1.291,0,1.388,1.671,1.466,3.013c0.068,1.173,0.067,2.534,0.067,3.435v0.164C26.533,32.164,26.086,32.611,25.533,32.611z"/>',
        '<path style="fill:#', color, ';" d="M31,27H9c-0.553,0-1-0.447-1-1s0.447-1,1-1h22c0.553,0,1,0.447,1,1S31.553,27,31,27z"/>'
      ),
      string.concat(
        '<path style="fill:#C03A2B;" d="M10,34c0-6.075,4.925-11,11-11s11,4.925,11,11"/>',
        '<path style="fill:#E64C3C;" d="M10,34c0-2.761,4.925-5,11-5s11,2.239,11,5"/>'
      ),
      string.concat(
        '<path style="fill:#FFFFFF;" d="M32,27H10c0,6.075,4.925,11,11,11S32,33.075,32,27z"/>',
        '<path style="fill:#ECF0F1;" d="M30,31h-2v-4c0-0.552-0.447-1-1-1s-1,0.448-1,1v4h-2v-4c0-0.552-0.447-1-1-1s-1,0.448-1,1v4h-2v-4c0-0.552-0.447-1-1-1s-1,0.448-1,1v4h-2v-4c0-0.552-0.447-1-1-1s-1,0.448-1,1v4h-2c-0.553,0-1,0.448-1,1s0.447,1,1,1h2v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3h2v4c0,0.552,0.447,1,1,1s1-0.448,1-1v-4h2v4c0,0.552,0.447,1,1,1s1-0.448,1-1v-4h2v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3h2c0.553,0,1-0.448,1-1S30.553,31,30,31z"/>',
        '<path style="fill:#', color, ';" d="M21,39c-6.617,0-12-5.383-12-12c0-0.552,0.447-1,1-1h22c0.553,0,1,0.448,1,1C33,33.617,27.617,39,21,39z M11.05,28c0.503,5.046,4.773,9,9.95,9s9.447-3.954,9.95-9H11.05z"/>'
      ),
      string.concat(
        '<path style="fill:#C03A2B;" d="M32,25c0,6.075-4.925,11-11,11s-11-4.925-11-11H32z"/>',
        '<rect x="17" y="25" style="fill:#ECF0F1;" width="4" height="6"/>',
        '<rect x="21" y="25" style="fill:#ECF0F1;" width="4" height="4"/>'
      ),
      string.concat(
        '<g>',
          '<path style="fill:#FB7B76;" d="M28.891,32.744c-1.102,1.102-2.424,1.978-3.891,2.573l5.516,5.516c1.556,1.556,4.101,1.556,5.657,0l0.707-0.707c1.556-1.556,1.556-4.101,0-5.657l-5.357-5.357C30.93,30.521,29.956,31.679,28.891,32.744z"/>',
        '</g>',
        '<path style="fill:#E64C3C;" d="M33.345,37.591c-0.256,0-0.512-0.098-0.707-0.293l-0.116-0.115c-1.811-1.813-2.982-2.882-3.486-3.184c-0.275,0.017-0.538-0.087-0.743-0.292c-0.391-0.391-0.391-1.023,0-1.414c0.912-0.913,2.163,0.2,3.167,1.095c0.878,0.781,1.84,1.744,2.477,2.381l0.115,0.115c0.391,0.391,0.391,1.023,0,1.414C33.856,37.493,33.601,37.591,33.345,37.591z"/>',
        '<path style="fill:#', color, ';" d="M21,37c-6.617,0-12-5.383-12-12c0-0.553,0.448-1,1-1s1,0.447,1,1c0,5.514,4.486,10,10,10s10-4.486,10-10c0-0.553,0.448-1,1-1s1,0.447,1,1C33,31.617,27.617,37,21,37z"/>'
      ),
      string.concat(
        '<path style="fill:#C03A2B;" d="M10,27c0,6.075,4.925,11,11,11s11-4.925,11-11H10z"/>',
        '<path style="fill:#FFFFFF;" d="M10,27c0,2.119,2.905,3.926,7,4.654V27H10z"/>',
        '<path style="fill:#FFFFFF;" d="M19,27v4.913C19.649,31.968,20.316,32,21,32s1.351-0.032,2-0.087V27H19z"/>',
        '<path style="fill:#FFFFFF;" d="M32,27h-7v4.654C29.095,30.926,32,29.119,32,27z"/>',
        '<path style="fill:#ECF0F1;" d="M17,27v4.654c0.64,0.114,1.308,0.202,2,0.26V27H17z"/>',
        '<path style="fill:#ECF0F1;" d="M23,27v4.913c0.692-0.058,1.36-0.146,2-0.26V27H23z"/>'
      ),
      string.concat('<path style="fill:#', color, ';" d="M19.387,32.993c-1.981,0-3.953-0.38-5.771-1.138c-0.51-0.212-0.751-0.798-0.538-1.308c0.212-0.509,0.796-0.751,1.308-0.538c3.051,1.271,6.607,1.313,9.753,0.116c3.217-1.224,5.682-3.561,6.939-6.578c0.212-0.509,0.795-0.753,1.308-0.538c0.51,0.212,0.75,0.798,0.538,1.308c-1.47,3.529-4.338,6.257-8.073,7.678C23.1,32.661,21.239,32.993,19.387,32.993z"/>'),
      string.concat('<path style="fill:#', color, ';" d="M32,30H10c-0.553,0-1-0.448-1-1s0.447-1,1-1h22c0.553,0,1,0.448,1,1S32.553,30,32,30z"/>'),
      string.concat('<path style="fill:#', color, ';" d="M30,32H12c-0.553,0-1-0.447-1-1s0.447-1,1-1h18c0.553,0,1,0.447,1,1S30.553,32,30,32z"/>'),
      '<path style="fill:#F9A671;" d="M28.415,31.92l-1.936-1.234l1.936-1.234c1.391-0.887,1.804-2.751,0.916-4.142c-0.887-1.391-2.751-1.804-4.143-0.916l-4.289,2.735l-4.289-2.735c-1.391-0.887-3.255-0.475-4.142,0.916h0c-0.887,1.391-0.475,3.255,0.916,4.142l1.936,1.234l-1.936,1.234c-1.391,0.887-1.804,2.751-0.916,4.142h0c0.887,1.391,2.751,1.804,4.142,0.916l4.289-2.735l4.289,2.735c1.391,0.887,3.255,0.475,4.143-0.916C30.218,34.672,29.806,32.807,28.415,31.92z"/>',
      string.concat(
        '<path style="fill:#', color, ';" d="M11.5,36c-0.553,0-1-0.447-1-1s0.447-1,1-1c1.654,0,3-1.346,3-3s-1.346-3-3-3c-0.553,0-1-0.447-1-1s0.447-1,1-1c2.757,0,5,2.243,5,5S14.257,36,11.5,36z"/>',
        '<path style="fill:#', color, ';" d="M30.5,36c-2.757,0-5-2.243-5-5s2.243-5,5-5c0.553,0,1,0.447,1,1s-0.447,1-1,1c-1.654,0-3,1.346-3,3s1.346,3,3,3c0.553,0,1,0.447,1,1S31.053,36,30.5,36z"/>',
        '<path style="fill:#', color, ';" d="M26.5,32.5c-0.553,0-1-0.447-1-1c0-0.436-1.577-1.5-4.5-1.5s-4.5,1.064-4.5,1.5c0,0.553-0.447,1-1,1s-1-0.447-1-1c0-2.298,3.27-3.5,6.5-3.5s6.5,1.202,6.5,3.5C27.5,32.053,27.053,32.5,26.5,32.5z"/>'
      ),
      string.concat(
        '<path style="fill:#', color, ';" d="M20.011,35.001c-1.474,0-2.967-0.28-4.396-0.876c-0.51-0.212-0.751-0.798-0.538-1.308s0.801-0.751,1.308-0.538c4.704,1.96,10.265-0.188,12.141-4.691c0.213-0.51,0.799-0.75,1.308-0.538c0.51,0.212,0.751,0.798,0.538,1.308C28.652,32.483,24.424,35.001,20.011,35.001z"/>',
        '<path style="fill:#', color, ';" d="M31.447,30c-0.209,0-0.419-0.065-0.599-0.2l-4-3c-0.442-0.331-0.532-0.958-0.2-1.399c0.332-0.442,0.958-0.53,1.399-0.2l4,3c0.442,0.331,0.532,0.958,0.2,1.399C32.052,29.862,31.752,30,31.447,30z"/>'
      ),
      string.concat(
        '<polygon style="fill:#E64C3C;" points="16,30 14,36 12,30 14,30  "/>',
        '<polygon style="fill:#E64C3C;" points="30,30 28,36 26,30 28,30  "/>',
        '<path style="fill:#', color, ';" d="M30,31H12c-0.553,0-1-0.447-1-1s0.447-1,1-1h18c0.553,0,1,0.447,1,1S30.553,31,30,31z"/>'
      ),
      string.concat('<path style="fill:#', color, ';" d="M21,36c-6.617,0-12-5.383-12-12c0-0.552,0.447-1,1-1s1,0.448,1,1c0,5.514,4.486,10,10,10s10-4.486,10-10c0-0.552,0.447-1,1-1s1,0.448,1,1C33,30.617,27.617,36,21,36z"/>'),
      string.concat(
        '<g transform="translate(4, 8) scale(0.8, 0.8)">',
          '<ellipse style="fill:#C03A2B;" cx="21.069" cy="26.517" rx="9.052" ry="9.483"/>',
          '<path style="fill:#E64C3C;" d="M21.054,26.517c-3.706,0-6.731,2.66-6.976,6.023c1.296,1.649,3.114,2.832,5.189,3.271c0.581,0.105,1.177,0.168,1.787,0.168c0.643,0,1.27-0.066,1.88-0.182c2.034-0.446,3.817-1.607,5.098-3.222C27.805,29.195,24.772,26.517,21.054,26.517z"/>',
        '</g>'
      )
    ];

    return mouths[gen % 20];
  }
}