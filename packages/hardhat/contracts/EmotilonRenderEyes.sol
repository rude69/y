//SPDX-License-Identifier: MIT
pragma solidity >=0.8.0 <0.9.0;

import "@openzeppelin/contracts/utils/Strings.sol";
import 'base64-sol/base64.sol';
import './ToColor.sol';

library EmotilonRenderEyes {

  function names() public pure returns (string[18] memory) {
    return [
      'normal',
      'angry',
      'small',
      'dead',
      'desperate',
      'dumb',
      'semi',
      'big',
      'left',
      'heart',
      'sad',
      'flat',
      'smug',
      'winkingLeft',
      'winkingLeftBig',
      'winkingRight',
      'winkingRightBig',
      'yawning'
    ];
  }

  function colors() public pure returns (string[15] memory) {
    return [
      '49b50b',
      '2d690a',
      '67d925',
      '2561d9',
      '16429c',
      '13728f',
      '13898f',
      '138f7e',
      '1cd4bb',
      '6e5915',
      '4a3c0d',
      '99790e',
      '241d05',
      '0d0a01',
      'AF8066'
    ];
  }

  function render(uint8 gen, uint8 genColor, uint256 healthStatus) public pure returns (string memory) {

    string memory color = colors()[genColor % 15];
    string memory color2 = colors()[genColor % 15];

    if (healthStatus == 0) {
      // death eyes
      return string.concat(
        '<path style="fill:#', color2, ';" d="M8,19.485c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l8.485-8.485c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-8.485,8.485C8.512,19.388,8.256,19.485,8,19.485z"/>',
        '<path style="fill:#', color2, ';" d="M16.485,19.485c-0.256,0-0.512-0.098-0.707-0.293l-8.485-8.485c-0.391-0.391-0.391-1.023,0-1.414s1.023-0.391,1.414,0l8.485,8.485c0.391,0.391,0.391,1.023,0,1.414C16.997,19.388,16.741,19.485,16.485,19.485z"/>',
        '<path style="fill:#', color2, ';" d="M25.515,19.485c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l8.485-8.485c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-8.485,8.485C26.026,19.388,25.771,19.485,25.515,19.485z"/>',
        '<path style="fill:#', color2, ';" d="M34,19.485c-0.256,0-0.512-0.098-0.707-0.293l-8.485-8.485c-0.391-0.391-0.391-1.023,0-1.414s1.023-0.391,1.414,0l8.485,8.485c0.391,0.391,0.391,1.023,0,1.414C34.512,19.388,34.256,19.485,34,19.485z"/>'
      );
    }

    string[17] memory eyes = [
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="12" cy="14" r="6"/>',
        '<circle style="fill:#FFFFFF;" cx="30" cy="14" r="6"/>',
        '<circle style="fill:#', color, ';" cx="12" cy="14" r="3"/>',
        '<circle style="fill:#', color, ';" cx="30" cy="14" r="3"/>'
      ),
      string.concat(
        '<path style="fill:#', color2, ';" d="M17.001,15c-0.294,0-0.584-0.128-0.782-0.375l-4-5c-0.345-0.431-0.274-1.061,0.156-1.405c0.433-0.346,1.06-0.274,1.406,0.156l4,5c0.345,0.431,0.274,1.061-0.156,1.405C17.44,14.928,17.22,15,17.001,15z"/>',
        '<path style="fill:#', color2, ';" d="M24.999,15c-0.219,0-0.439-0.072-0.624-0.219c-0.431-0.345-0.501-0.974-0.156-1.405l4-5c0.347-0.43,0.975-0.501,1.406-0.156c0.431,0.345,0.501,0.974,0.156,1.405l-4,5C25.583,14.872,25.293,15,24.999,15z"/>'
      ),
      string.concat(
        '<circle style="fill:#', color, ';" cx="13" cy="13.5" r="3.5"/>',
        '<circle style="fill:#', color, ';" cx="29" cy="13.5" r="3.5"/>'
      ),
      string.concat(
        '<path style="fill:#', color2, ';" d="M31.999,21c-0.226,0-0.452-0.076-0.64-0.232l-6-5C25.132,15.578,25,15.297,25,15s0.132-0.578,0.359-0.768l6-5c0.427-0.354,1.055-0.296,1.409,0.128c0.354,0.424,0.296,1.055-0.128,1.408L27.563,15l5.078,4.232c0.424,0.354,0.481,0.984,0.128,1.408C32.57,20.877,32.286,21,31.999,21z"/>',
        '<path style="fill:#', color2, ';" d="M10.001,21c-0.287,0-0.571-0.123-0.77-0.36c-0.354-0.424-0.296-1.055,0.128-1.408L14.438,15l-5.078-4.232C8.936,10.415,8.878,9.784,9.231,9.36c0.354-0.424,0.983-0.482,1.409-0.128l6,5C16.868,14.422,17,14.703,17,15s-0.132,0.578-0.359,0.768l-6,5C10.453,20.924,10.227,21,10.001,21z"/>'
      ),
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="12" cy="15" r="6"/>',
        '<circle style="fill:#FFFFFF;" cx="30" cy="15" r="6"/>',
        '<circle style="fill:#', color, ';" cx="10" cy="13.5" r="3.5"/>',
        '<circle style="fill:#', color, ';" cx="32" cy="13.5" r="3.5"/>'
      ),
      string.concat(
        '<path style="fill:#', color2, ';" d="M16,17c-0.552,0-1-0.448-1-1c0-1.654-1.346-3-3-3s-3,1.346-3,3c0,0.552-0.448,1-1,1s-1-0.448-1-1c0-2.757,2.243-5,5-5s5,2.243,5,5C17,16.552,16.552,17,16,17z"/>',
        '<path style="fill:#', color2, ';" d="M34,17c-0.552,0-1-0.448-1-1c0-1.654-1.346-3-3-3s-3,1.346-3,3c0,0.552-0.448,1-1,1s-1-0.448-1-1c0-2.757,2.243-5,5-5s5,2.243,5,5C35,16.552,34.552,17,34,17z"/>'
      ),
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="12" cy="15" r="7"/>',
        '<circle style="fill:#FFFFFF;" cx="30" cy="15" r="7"/>',
        '<circle style="fill:#', color, ';" cx="12" cy="15" r="5"/>',
        '<circle style="fill:#', color, ';" cx="30" cy="15" r="5"/>'
      ),
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="12" cy="15" r="6"/>',
        '<circle style="fill:#FFFFFF;" cx="30" cy="15" r="6"/>',
        '<circle style="fill:#', color, ';" cx="10" cy="13.5" r="3.5"/>',
        '<circle style="fill:#', color, ';" cx="28" cy="13.5" r="3.5"/>'
      ),
      string.concat(
        '<path style="fill:#E64C3C;" d="M12.545,10.702C12.983,9.7,13.982,9,15.146,9c1.567,0,2.695,1.294,2.837,2.837c0,0,0.077,0.383-0.092,1.072c-0.229,0.939-0.769,1.773-1.496,2.409l-3.85,3.317L8.76,15.319c-0.727-0.636-1.267-1.471-1.496-2.409c-0.169-0.689-0.092-1.072-0.092-1.072C7.314,10.294,8.442,9,10.009,9C11.172,9,12.107,9.7,12.545,10.702z"/>',
        '<path style="fill:#E64C3C;" d="M29.39,10.702C29.828,9.7,30.828,9,31.991,9c1.567,0,2.695,1.294,2.837,2.837c0,0,0.077,0.383-0.092,1.072c-0.229,0.939-0.769,1.773-1.496,2.409l-3.85,3.317l-3.785-3.317c-0.727-0.636-1.267-1.471-1.496-2.409c-0.169-0.689-0.092-1.072-0.092-1.072C24.159,10.294,25.288,9,26.854,9C28.018,9,28.952,9.7,29.39,10.702z"/>'
      ),
      string.concat(
        '<g transform="translate(-2, -6)">',
          '<path style="fill:#', color2, ';" d="M36.5,25c-4.411,0-8-3.589-8-8c0-0.552,0.447-1,1-1s1,0.448,1,1c0,3.309,2.691,6,6,6c0.553,0,1,0.448,1,1S37.053,25,36.5,25z"/>',
          '<path style="fill:#', color2, ';" d="M10.5,25c-0.553,0-1-0.448-1-1s0.447-1,1-1c3.309,0,6-2.691,6-6c0-0.552,0.447-1,1-1s1,0.448,1,1C18.5,21.411,14.911,25,10.5,25z"/>',
        '</g>'
      ),
      string.concat(
        '<path style="fill:#', color2, ';" d="M16,16H8c-0.553,0-1-0.447-1-1s0.447-1,1-1h8c0.553,0,1,0.447,1,1S16.553,16,16,16z"/>',
        '<path style="fill:#', color2, ';" d="M34,16h-8c-0.553,0-1-0.447-1-1s0.447-1,1-1h8c0.553,0,1,0.447,1,1S34.553,16,34,16z"/>'
      ),
      string.concat(
        '<path style="fill:#', color, ';" d="M13.097,13.069c-2.389,0-4.593-0.772-6.394-2.069C6.269,11.814,6,12.728,6,13.714c0,3.207,2.6,5.806,5.806,5.806s5.806-2.6,5.806-5.806c0-0.529-0.093-1.031-0.226-1.517C16.069,12.758,14.62,13.069,13.097,13.069z"/>',
        '<path style="fill:#', color, ';" d="M32.097,13.272c-2.389,0-4.593-0.772-6.394-2.069C25.269,12.016,25,12.931,25,13.917c0,3.207,2.6,5.806,5.806,5.806s5.806-2.6,5.806-5.806c0-0.529-0.093-1.031-0.226-1.517C35.069,12.96,33.62,13.272,32.097,13.272z"/>'
      ),
      string.concat(
        '<circle style="fill:#', color, ';" cx="29.5" cy="14.5" r="3.5"/>',
        '<path style="fill:#', color2, ';" d="M15,15H8c-0.553,0-1-0.448-1-1s0.447-1,1-1h7c0.553,0,1,0.448,1,1S15.553,15,15,15z"/>'
      ),
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="30" cy="14" r="6"/>',
        '<circle style="fill:#', color, ';" cx="30" cy="14" r="3"/>',
        '<path style="fill:#', color2, ';" d="M15,15H8c-0.553,0-1-0.448-1-1s0.447-1,1-1h7c0.553,0,1,0.448,1,1S15.553,15,15,15z"/>'
      ),
      string.concat(
        '<circle style="fill:#', color, ';" cx="12.5" cy="13.5" r="3.5"/>',
        '<path style="fill:#', color2, ';" d="M34,16h-8c-0.553,0-1-0.447-1-1s0.447-1,1-1h8c0.553,0,1,0.447,1,1S34.553,16,34,16z"/>'

      ),
      string.concat(
        '<circle style="fill:#FFFFFF;" cx="12" cy="14" r="6"/>',
        '<circle style="fill:#', color, ';" cx="12" cy="14" r="3"/>',
        '<path style="fill:#', color2, ';" d="M34,16h-8c-0.553,0-1-0.447-1-1s0.447-1,1-1h8c0.553,0,1,0.447,1,1S34.553,16,34,16z"/>'
      ),
      string.concat(
        '<path style="fill:#', color2, ';" d="M10.828,17c-0.552,0-1-0.447-1-1c0-2.436,1.417-4.546,3.471-5.55c-1.519-0.367-3.259-0.006-4.35,1.084c-0.391,0.391-1.023,0.391-1.414,0s-0.391-1.023,0-1.414c2.4-2.401,6.772-2.4,9.173,0c0.286,0.286,0.372,0.716,0.217,1.09s-0.52,0.617-0.924,0.617c-2.301,0-4.172,1.872-4.172,4.173C11.828,16.553,11.38,17,10.828,17z"/>',
        '<path style="fill:#', color2, ';" d="M32.172,17.173c-0.552,0-1-0.447-1-1C31.172,13.872,29.301,12,27,12c-0.404,0-0.769-0.243-0.924-0.617s-0.069-0.804,0.217-1.09c2.4-2.4,6.772-2.4,9.173,0c0.391,0.391,0.391,1.023,0,1.414s-1.023,0.391-1.414,0c-1.09-1.091-2.83-1.452-4.35-1.084c2.053,1.004,3.471,3.114,3.471,5.55C33.172,16.726,32.725,17.173,32.172,17.173z"/>'
      )
    ];

    return eyes[gen % 17];
  }
}